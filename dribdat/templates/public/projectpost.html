{% from "macros/_form.html" import render_form %}

{% extends "layout.html" %}

{% block page_title %}Post: {{project.name}}{% endblock %}
{% block body_class %}projectform{% endblock %}

{% block content %}
  <h2>Drib about
    <a class="project-link" href="{{ url_for('project.project_view', project_id=project.id) }}">{{project.name}}</a>
  </h2>

  <div class="form-project-post">

    {{ render_form(url_for('project.project_post', project_id=project.id), form) }}

  </div>

  {% if stage %}
  {% if all_valid and stage['name'] == 'LIVE' %}
    <div style="margin-top:1em" class="alert alert-success" role="alert">
      <i class="fa fa-thumbs-up"></i>
      Your project is ready for action!
    </div>
  {% else %}
  <div class="form-project-stage" style="margin-top:1em; font-size: 125%; border: 3px dashed orange; padding: 1em">
    <h4 style="text-align: center">
      Ready for the next stage?
    </h4>
    {% if all_valid %}
      {% for item in stage.conditions.agree %}
        <label style="clear:both;margin-top:0.5em"><input type="checkbox">&nbsp;{{ item }}</label>
      {% endfor %}
    {% endif %}
    {% for item in stage.conditions.validate %}
      {% if item.valid %}
        <div style="margin-top:0.5em" class="alert alert-success" role="alert">
          <i class="fa fa-thumbs-up"></i>
          {{ item.help }}
        </div>
      {% else %}
        <div style="margin-top:0.5em" class="alert alert-warning" role="alert">
          <i class="fa fa-paw"></i>
          {{ item.help }}
        </div>
      {% endif %}
    {% endfor %}
  </div>
  {% endif %}
  {% endif %}
{% endblock %}
